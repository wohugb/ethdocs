



<!DOCTYPE html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="以太坊家园版中文文档">
      
      
      
        <meta name="author" content="Nosy">
      
      
        <meta name="lang:clipboard.copy" content="复制">
      
        <meta name="lang:clipboard.copied" content="已复制">
      
        <meta name="lang:search.language" content="zh">
      
        <meta name="lang:search.result.none" content="没有找到符合条件的结果">
      
        <meta name="lang:search.result.one" content="找到 1 个符合条件的结果">
      
        <meta name="lang:search.result.other" content="# 个符合条件的结果">
      
        <meta name="lang:search.tokenizer" content="[\uff0c\u3002]+">
      
      <link rel="shortcut icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.2, mkdocs-material-2.2.5">
    
    
      
        <title>合同 - 以太坊家园版文档</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/application.bcabdff3.css">
      
        <link rel="stylesheet" href="../../assets/stylesheets/application-palette.792431c1.css">
      
    
    
      <script src="../../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    
    
    
  </head>
  
    
    
    
      <body data-md-color-primary="indigo" data-md-color-accent="indigo">
    
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="drawer">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="search">
    <label class="md-overlay" data-md-component="overlay" for="drawer"></label>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../.." title="以太坊家园版文档" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                以太坊家园版文档
              </span>
              <span class="md-header-nav__topic">
                合同
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="search"></label>
  <div class="md-search__inner">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" required placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query">
      <label class="md-icon md-search__icon" for="search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset">&#xE5CD;</button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            键入以开始搜索
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/wohugb/ethdocs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethdocs
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
        

  

<nav class="md-tabs md-tabs--active" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../.." title="前言" class="md-tabs__link">
        前言
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../introduction/what-is-ethereum/" title="简介" class="md-tabs__link">
          简介
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../clients/choosing-a-client/" title="客户端" class="md-tabs__link">
          客户端
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../connecting-to-clients/" title="链接" class="md-tabs__link">
          链接
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../account-management/" title="账号" class="md-tabs__link">
          账号
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../ether/" title="以太币" class="md-tabs__link">
          以太币
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../network/connecting-to-the-network/" title="网络" class="md-tabs__link">
          网络
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../mining/" title="挖矿" class="md-tabs__link">
          挖矿
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../account-types-gas-and-transactions/" title="合约和交易" class="md-tabs__link md-tabs__link--active">
          合约和交易
        </a>
      
    </li>
  

      
        
      
        
      
        
      
    </ul>
  </div>
</nav>
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    以太坊家园版文档
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/wohugb/ethdocs" title="前往 Github 仓库" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      wohugb/ethdocs
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../.." title="前言" class="md-nav__link">
      前言
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      简介
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        简介
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/what-is-ethereum/" title="什么是以太坊？" class="md-nav__link">
      什么是以太坊？
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/how-to-use-this-guide/" title="如何使用本指南？" class="md-nav__link">
      如何使用本指南？
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/the-homestead-release/" title="家园版" class="md-nav__link">
      家园版
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/web3/" title="Web 3" class="md-nav__link">
      Web 3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/history-of-ethereum/" title="以太网的历史" class="md-nav__link">
      以太网的历史
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/community/" title="社区" class="md-nav__link">
      社区
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/foundation/" title="以太坊基金会" class="md-nav__link">
      以太坊基金会
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction/contributors/" title="贡献者" class="md-nav__link">
      贡献者
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      客户端
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        客户端
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/choosing-a-client/" title="选择一个客户端" class="md-nav__link">
      选择一个客户端
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/cpp-ethereum/" title="cpp-ethereum" class="md-nav__link">
      cpp-ethereum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/go-ethereum/" title="go-ethereum" class="md-nav__link">
      go-ethereum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/pyethapp/" title="pyethapp" class="md-nav__link">
      pyethapp
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/ethereumjs-lib/" title="ethereumjs-lib" class="md-nav__link">
      ethereumjs-lib
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/ethereumj/" title="ethereum(j)" class="md-nav__link">
      ethereum(j)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/ethereumh/" title="ethereumH" class="md-nav__link">
      ethereumH
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/parity/" title="parity" class="md-nav__link">
      parity
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../clients/ruby-ethereum/" title="ruby-ethereum" class="md-nav__link">
      ruby-ethereum
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4">
    
    <label class="md-nav__link" for="nav-4">
      链接
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        链接
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-clients/" title="简介" class="md-nav__link">
      简介
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-clients/web3.js/" title="web3.js" class="md-nav__link">
      web3.js
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-clients/web3j/" title="web3j" class="md-nav__link">
      web3j
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-clients/nethereum/" title="Nethereum" class="md-nav__link">
      Nethereum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../connecting-to-clients/ethereum-ruby/" title="ethereum-ruby" class="md-nav__link">
      ethereum-ruby
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      账号
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        账号
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../account-management/" title="账号" class="md-nav__link">
      账号
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      以太币
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        以太币
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../ether/" title="以太币" class="md-nav__link">
      以太币
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      网络
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        网络
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../network/connecting-to-the-network/" title="连接到网络" class="md-nav__link">
      连接到网络
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../network/test-networks/" title="测试网络" class="md-nav__link">
      测试网络
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8">
    
    <label class="md-nav__link" for="nav-8">
      挖矿
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        挖矿
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../mining/" title="挖矿" class="md-nav__link">
      挖矿
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-9" type="checkbox" id="nav-9" checked>
    
    <label class="md-nav__link" for="nav-9">
      合约和交易
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-9">
        合约和交易
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../account-types-gas-and-transactions/" title="帐户类型燃料交易" class="md-nav__link">
      帐户类型燃料交易
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="toc">
        合同
      </label>
    
    <a href="./" title="合同" class="md-nav__link md-nav__link--active">
      合同
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-contract" title="What is a contract?" class="md-nav__link">
    What is a contract?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethereum-high-level-languages" title="Ethereum high level languages" class="md-nav__link">
    Ethereum high level languages
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solidity" title="Solidity" class="md-nav__link">
    Solidity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serpent" title="Serpent" class="md-nav__link">
    Serpent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lll" title="LLL" class="md-nav__link">
    LLL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutan-deprecated" title="Mutan (deprecated)" class="md-nav__link">
    Mutan (deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-contract" title="Writing a contract" class="md-nav__link">
    Writing a contract
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-a-simple-contract-compile_a_simple_contract" title="Compiling a simple contract {#compile_a_simple_contract}" class="md-nav__link">
    Compiling a simple contract {#compile_a_simple_contract}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-and-deploy-a-contract" title="Create and deploy a contract" class="md-nav__link">
    Create and deploy a contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interacting-with-a-contract-interacting_with_a_contract" title="Interacting with a contract {#interacting_with_a_contract}" class="md-nav__link">
    Interacting with a contract {#interacting_with_a_contract}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-metadata" title="Contract metadata" class="md-nav__link">
    Contract metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-contracts-and-transactions" title="Testing contracts and transactions" class="md-nav__link">
    Testing contracts and transactions
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../accessing-contracts-and-transactions/" title="访问合约和交易" class="md-nav__link">
      访问合约和交易
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../mix/" title="mix" class="md-nav__link">
      mix
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../developer-tools/" title="dapps" class="md-nav__link">
      dapps
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../ethereum-tests/" title="测试" class="md-nav__link">
      测试
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../web3-base-layer-services/" title="WEB3基本层服务" class="md-nav__link">
      WEB3基本层服务
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../faq/faq/" title="常见问题" class="md-nav__link">
      常见问题
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../glossary/" title="术语" class="md-nav__link">
      术语
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../about/" title="关于" class="md-nav__link">
      关于
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="toc">目录</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-is-a-contract" title="What is a contract?" class="md-nav__link">
    What is a contract?
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ethereum-high-level-languages" title="Ethereum high level languages" class="md-nav__link">
    Ethereum high level languages
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#solidity" title="Solidity" class="md-nav__link">
    Solidity
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#serpent" title="Serpent" class="md-nav__link">
    Serpent
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lll" title="LLL" class="md-nav__link">
    LLL
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutan-deprecated" title="Mutan (deprecated)" class="md-nav__link">
    Mutan (deprecated)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#writing-a-contract" title="Writing a contract" class="md-nav__link">
    Writing a contract
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compiling-a-simple-contract-compile_a_simple_contract" title="Compiling a simple contract {#compile_a_simple_contract}" class="md-nav__link">
    Compiling a simple contract {#compile_a_simple_contract}
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#create-and-deploy-a-contract" title="Create and deploy a contract" class="md-nav__link">
    Create and deploy a contract
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interacting-with-a-contract-interacting_with_a_contract" title="Interacting with a contract {#interacting_with_a_contract}" class="md-nav__link">
    Interacting with a contract {#interacting_with_a_contract}
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contract-metadata" title="Contract metadata" class="md-nav__link">
    Contract metadata
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-contracts-and-transactions" title="Testing contracts and transactions" class="md-nav__link">
    Testing contracts and transactions
  </a>
  
</li>
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="contracts-contracts">Contracts {#Contracts}<a class="headerlink" href="#contracts-contracts" title="Permanent link">&para;</a></h1>
<h2 id="what-is-a-contract">What is a contract?<a class="headerlink" href="#what-is-a-contract" title="Permanent link">&para;</a></h2>
<p>A contract is a collection of code (its functions) and data (its state)
that resides at a specific address on the Ethereum blockchain. Contract
accounts are able to pass messages between themselves as well as doing
practically Turing complete computation. Contracts live on the
blockchain in a Ethereum-specific binary format called Ethereum Virtual
Machine (EVM) bytecode.</p>
<p>Contracts are typically written in some high level language such as
<a href="https://solidity.readthedocs.org/en/latest/">Solidity</a> and then
compiled into bytecode to be uploaded on the blockchain.</p>
<p>::: {.seealso}
Other languages also exist, notably Serpent and LLL, which are described
further in the [ethereum-high-level-languages]{role="ref"} section of
this documentation.
:::</p>
<p>[IDE-or-development-framework]{role="ref"} lists the integrated
development environments, developer tools that help you develop in these
languages, offering testing, and deployment support among other
features.</p>
<h2 id="ethereum-high-level-languages">Ethereum high level languages<a class="headerlink" href="#ethereum-high-level-languages" title="Permanent link">&para;</a></h2>
<p>Contracts live on the blockchain in an Ethereum-specific binary format
(EVM bytecode) that is executed by the Ethereum Virtual Machine (EVM).
However, contracts are typically written in a higher level language and
then compiled using the EVM compiler into byte code to be deployed to
the blockchain.</p>
<p>Below are the different high level languages developers can use to write
smart contracts for Ethereum.</p>
<h3 id="solidity">Solidity<a class="headerlink" href="#solidity" title="Permanent link">&para;</a></h3>
<p>Solidity is a language similar to JavaScript which allows you to develop
contracts and compile to EVM bytecode. It is currently the flagship
language of Ethereum and the most popular.</p>
<ul>
<li><a href="http://solidity.readthedocs.org/en/latest/">Solidity
    Documentation</a> -
    Solidity is the flagship Ethereum high level language that is used
    to write contracts.</li>
<li><a href="http://ethereum.github.io/browser-solidity/">Solidity online realtime
    compiler</a></li>
<li><a href="https://github.com/ethereum/wiki/wiki/Standardized_Contract_APIs">Standardized Contract
    APIs</a></li>
<li><a href="https://github.com/ethereum/wiki/wiki/Useful-Ðapp-Patterns">Useful Ðapp
    Patterns</a> -
    Code snippets which are useful for Ðapp development.</li>
</ul>
<h3 id="serpent">Serpent<a class="headerlink" href="#serpent" title="Permanent link">&para;</a></h3>
<p>Serpent is a language similar to Python which can be used to develop
contracts and compile to EVM bytecode. It is intended to be maximally
clean and simple, combining many of the efficiency benefits of a
low-level language with ease-of-use in programming style, and at the
same time adding special domain-specific features for contract
programming. Serpent is compiled using _LLL.</p>
<ul>
<li><a href="https://github.com/ethereum/wiki/wiki/Serpent">Serpent on the ethereum
    wiki</a></li>
<li><a href="https://github.com/ethereum/serpent">Serpent EVM compiler</a></li>
</ul>
<h3 id="lll">LLL<a class="headerlink" href="#lll" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/ethereum/libethereum/tree/develop/liblll">Lisp Like Language
(LLL)</a> is a
low level language similar to Assembly. It is meant to be very simple
and minimalistic; essentially just a tiny wrapper over coding in EVM
directly.</p>
<ul>
<li><a href="https://github.com/ethereum/libethereum/tree/develop/liblll">LIBLLL in
    GitHub</a></li>
<li><a href="https://www.reddit.com/r/ethereum/comments/3secu1/anyone_have_a_copy_of_the_old_lll_tutorials/">Examples of
    LLL</a></li>
</ul>
<h3 id="mutan-deprecated">Mutan (deprecated)<a class="headerlink" href="#mutan-deprecated" title="Permanent link">&para;</a></h3>
<p><a href="https://github.com/obscuren/mutan">Mutan</a> is a statically typed, C-like
language designed and developed by Jeffrey Wilcke. It is no longer
maintained.</p>
<h2 id="writing-a-contract">Writing a contract<a class="headerlink" href="#writing-a-contract" title="Permanent link">&para;</a></h2>
<p>No language would be complete without a Hello World program. Operating
within the Ethereum environment, Solidity has no obvious way of
\"outputting\" a string. The closest we can do is to use a <em>log event</em>
to place a string into the blockchain:</p>
<p>``` {.sourceCode .js}
contract HelloWorld {
    event Print(string out);
    function() { Print("Hello, World!"); }
}
<div class="codehilite"><pre><span></span><span class="nv">This</span> <span class="s s-Atom">contract</span> <span class="s s-Atom">will</span> <span class="s s-Atom">create</span> <span class="s s-Atom">a</span> <span class="s s-Atom">log</span> <span class="s s-Atom">entry</span> <span class="s s-Atom">on</span> <span class="s s-Atom">the</span> <span class="s s-Atom">blockchain</span> <span class="s s-Atom">of</span> <span class="s s-Atom">type</span> <span class="nv">Print</span>
<span class="s s-Atom">with</span> <span class="s s-Atom">a</span> <span class="s s-Atom">parameter</span> <span class="s s-Atom">\</span><span class="s2">&quot;Hello, World!\&quot; each time it is executed.</span>

<span class="s2">::: {.seealso}</span>
<span class="s2">[Solidity docs](https://solidity.readthedocs.org/en/latest/) has more</span>
<span class="s2">examples and guidelines to writing Solidity code.</span>
<span class="s2">:::</span>

<span class="s2">Compiling a contract</span>
<span class="s2">--------------------</span>

<span class="s2">Compilation of solidity contracts can be accomplished via a number of</span>
<span class="s2">mechanisms.</span>

<span class="s2">-   Using the `solc` compiler via the command line.</span>
<span class="s2">-   Using `web3.eth.compile.solidity` in the javascript console provided</span>
<span class="s2">    by `geth` or `eth` (This still requires the `solc` compiler to be</span>
<span class="s2">    installed).</span>
<span class="s2">-   The [online Solidity realtime</span>
<span class="s2">    compiler](https://ethereum.github.io/browser-solidity/).</span>
<span class="s2">-   The [Meteor dapp Cosmo for building solidity</span>
<span class="s2">    contracts](https://github.com/SilentCicero/meteor-dapp-cosmo).</span>
<span class="s2">-   The [Mix</span>
<span class="s2">    IDE](https://github.com/ethereum/wiki/wiki/Mix:-The-DApp-IDE).</span>
<span class="s2">-   The [Ethereum Wallet](https://github.com/ethereum/mist/releases).</span>

<span class="s2">::: {.note}</span>
<span class="s2">::: {.admonition-title}</span>
<span class="s2">Note</span>
<span class="s2">:::</span>

<span class="s2">More information on solc and compiling Solidity contract code can be</span>
<span class="s2">found</span>
<span class="s2">[here](https://solidity.readthedocs.org/en/latest/frequently-asked-questions.html#how-do-i-compile-contracts).</span>
<span class="s2">:::</span>

<span class="s2">### Setting up the solidity compiler in geth</span>

<span class="s2">If you start up your `geth` node, you can check which compilers are</span>
<span class="s2">available.</span>

<span class="s2">``` {.sourceCode .bash}</span>
<span class="s2">&gt; web3.eth.getCompilers();</span>
<span class="s2">[&quot;</span><span class="s s-Atom">lll</span><span class="s2">&quot;, &quot;</span><span class="s s-Atom">solidity</span><span class="s2">&quot;, &quot;</span><span class="s s-Atom">serpent</span><span class="err">&quot;</span><span class="p">]</span>
</pre></div></p>
<p>This command returns an array of strings indicating which compilers are
currently available.</p>
<p>::: {.note}
::: {.admonition-title}
Note
:::</p>
<p>The <code>solc</code> compiler is installed with <code>cpp-ethereum</code>. Alternatively, you
can <a href="https://github.com/ethereum/go-ethereum/wiki/Building-Ethereum">build it
yourself</a>.
:::</p>
<p>If your <code>solc</code> executable is in a non-standard location you can specify
a custom path to the <code>solc</code> executable using th <code>--solc</code> flag.</p>
<p>``` {.sourceCode .bash}
$ geth --solc /usr/local/bin/solc
<div class="codehilite"><pre><span></span>Alternatively, you can set this option at runtime via the console:

``` {.sourceCode .bash}
&gt; admin.setSolc(&quot;/usr/local/bin/solc&quot;)
solc, the solidity compiler commandline interface
Version: 0.2.2-02bb315d/.-Darwin/appleclang/JIT linked to libethereum-1.2.0-8007cef0/.-Darwin/appleclang/JIT
path: /usr/local/bin/solc
</pre></div></p>
<h3 id="compiling-a-simple-contract-compile_a_simple_contract">Compiling a simple contract {#compile_a_simple_contract}<a class="headerlink" href="#compiling-a-simple-contract-compile_a_simple_contract" title="Permanent link">&para;</a></h3>
<p>Let\'s compile a simple contract source:</p>
<p>``` {.sourceCode .bash}</p>
<blockquote>
<p>source = "contract test { function multiply(uint a) returns(uint d) { return a * 7; } }"
<div class="codehilite"><pre><span></span><span class="nt">This</span> <span class="nt">contract</span> <span class="nt">offers</span> <span class="nt">a</span> <span class="nt">single</span> <span class="nt">method</span> <span class="o">**</span><span class="nt">multiply</span><span class="o">**</span> <span class="nt">which</span> <span class="nt">is</span> <span class="nt">called</span> <span class="nt">with</span> <span class="nt">a</span>
<span class="nt">positive</span> <span class="nt">integer</span> <span class="err">`</span><span class="nt">a</span><span class="err">`</span> <span class="nt">and</span> <span class="nt">returns</span> <span class="err">`</span><span class="nt">a</span> <span class="o">*</span> <span class="nt">7</span><span class="err">`</span><span class="o">.</span>

<span class="nt">You</span> <span class="nt">are</span> <span class="nt">ready</span> <span class="nt">to</span> <span class="nt">compile</span> <span class="nt">solidity</span> <span class="nt">code</span> <span class="nt">in</span> <span class="nt">the</span> <span class="err">`</span><span class="nt">geth</span><span class="err">`</span> <span class="nt">JS</span> <span class="nt">console</span> <span class="nt">using</span>
<span class="cp">[</span><span class="nx">eth.compile.solidity</span><span class="p">()</span><span class="cp">]</span><span class="o">(</span><span class="nt">https</span><span class="o">://</span><span class="nt">github</span><span class="p">.</span><span class="nc">com</span><span class="o">/</span><span class="nt">ethereum</span><span class="o">/</span><span class="nt">wiki</span><span class="o">/</span><span class="nt">wiki</span><span class="o">/</span><span class="nt">JavaScript-API</span><span class="p">#</span><span class="nn">web3ethcompilesolidity</span><span class="o">):</span>

<span class="err">```</span> <span class="p">{</span><span class="err">.sourceCode</span> <span class="err">.bash</span><span class="p">}</span>
<span class="o">&gt;</span> <span class="nt">contract</span> <span class="o">=</span> <span class="nt">eth</span><span class="p">.</span><span class="nc">compile</span><span class="p">.</span><span class="nc">solidity</span><span class="o">(</span><span class="nt">source</span><span class="o">)</span><span class="p">.</span><span class="nc">test</span>
<span class="p">{</span>
  <span class="n">code</span><span class="p">:</span> <span class="s1">&#39;605280600c6000396000f3006000357c010000000000000000000000000000000000000000000000000000000090048063c6888fa114602e57005b60376004356041565b8060005260206000f35b6000600782029050604d565b91905056&#39;</span><span class="p">,</span>
  <span class="n">info</span><span class="o">:</span> <span class="err">{</span>
    <span class="n">language</span><span class="o">:</span> <span class="s1">&#39;Solidity&#39;</span><span class="p">,</span>
    <span class="n">languageVersion</span><span class="o">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
    <span class="n">compilerVersion</span><span class="o">:</span> <span class="s1">&#39;0.9.13&#39;</span><span class="p">,</span>
    <span class="n">abiDefinition</span><span class="o">:</span> <span class="cp">[</span><span class="p">{</span>
      <span class="nx">constant</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">inputs</span><span class="p">:</span> <span class="err">[</span><span class="p">{</span>
        <span class="nx">name</span><span class="p">:</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span>
        <span class="k">type</span><span class="p">:</span> <span class="s1">&#39;uint256&#39;</span>
      <span class="p">}</span> <span class="cp">]</span><span class="p">,</span>
      <span class="n">name</span><span class="o">:</span> <span class="s1">&#39;multiply&#39;</span><span class="p">,</span>
      <span class="n">outputs</span><span class="o">:</span> <span class="cp">[</span><span class="p">{</span>
        <span class="nx">name</span><span class="p">:</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span>
        <span class="k">type</span><span class="p">:</span> <span class="s1">&#39;uint256&#39;</span>
      <span class="p">}</span> <span class="cp">]</span><span class="p">,</span>
      <span class="n">type</span><span class="o">:</span> <span class="s1">&#39;function&#39;</span>
    <span class="p">}</span> <span class="o">],</span>
    <span class="nt">userDoc</span><span class="o">:</span> <span class="p">{</span>
      <span class="n">methods</span><span class="p">:</span> <span class="err">{</span>
      <span class="p">}</span>
    <span class="err">}</span><span class="o">,</span>
    <span class="nt">developerDoc</span><span class="o">:</span> <span class="p">{</span>
      <span class="n">methods</span><span class="p">:</span> <span class="err">{</span>
      <span class="p">}</span>
    <span class="err">}</span><span class="o">,</span>
    <span class="nt">source</span><span class="o">:</span> <span class="s1">&#39;contract test { function multiply(uint a) returns(uint d) { return a * 7; } }&#39;</span>
  <span class="err">}</span>
<span class="err">}</span>
</pre></div></p>
</blockquote>
<p>::: {.note}
::: {.admonition-title}
Note
:::</p>
<p>The compiler is also available via
<a href="https://github.com/ethereum/wiki/wiki/JSON-RPC">RPC</a> and therefore via
web3\.js \&lt;https://github.com/ethereum/wiki/wiki/JavaScript
 API#web3ethcompilesolidity>__ to any in-browser Ðapp connecting to
<code>geth</code> via RPC/IPC.
:::</p>
<p>The following example shows how you interface <code>geth</code> via JSON-RPC to use
the compiler.</p>
<p>``` {.sourceCode .bash}
$ geth --datadir ~/eth/ --loglevel 6 --logtostderr=true --rpc --rpcport 8100 --rpccorsdomain '*' --mine console  2&gt;&gt; ~/eth/eth.log
$ curl -X POST --data '{"jsonrpc":"2.0","method":"eth_compileSolidity","params":["contract test { function multiply(uint a) returns(uint d) { return a * 7; } }"],"id":1}' http://127.0.0.1:8100
<div class="codehilite"><pre><span></span><span class="n">The</span> <span class="n">compiler</span> <span class="n">output</span> <span class="k">for</span> <span class="n">one</span> <span class="n">source</span> <span class="n">will</span> <span class="n">give</span> <span class="n">you</span> <span class="n">contract</span> <span class="n">objects</span> <span class="n">each</span>
<span class="n">representing</span> <span class="n">a</span> <span class="n">single</span> <span class="n">contract</span><span class="p">.</span> <span class="n">The</span> <span class="n">actual</span> <span class="k">return</span> <span class="n">value</span> <span class="n">of</span>
<span class="err">`</span><span class="n">eth</span><span class="p">.</span><span class="n">compile</span><span class="p">.</span><span class="n">solidity</span><span class="err">`</span> <span class="n">is</span> <span class="n">a</span> <span class="n">map</span> <span class="n">of</span> <span class="n">contract</span> <span class="n">name</span> <span class="n">to</span> <span class="n">contract</span> <span class="n">object</span>
<span class="n">pairs</span><span class="p">.</span> <span class="n">Since</span> <span class="n">our</span> <span class="n">contract</span><span class="err">\&#39;</span><span class="n">s</span> <span class="n">name</span> <span class="n">is</span> <span class="err">`</span><span class="n">test</span><span class="err">`</span><span class="p">,</span>
<span class="err">`</span><span class="n">eth</span><span class="p">.</span><span class="n">compile</span><span class="p">.</span><span class="n">solidity</span><span class="p">(</span><span class="n">source</span><span class="p">).</span><span class="n">test</span><span class="err">`</span> <span class="n">will</span> <span class="n">give</span> <span class="n">you</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">object</span>
<span class="k">for</span> <span class="n">the</span> <span class="n">test</span> <span class="n">contract</span> <span class="n">containing</span> <span class="n">the</span> <span class="n">following</span> <span class="nl">fields</span><span class="p">:</span>

<span class="o">:::</span> <span class="p">{.</span><span class="n">glossary</span><span class="p">}</span>

<span class="err">`</span><span class="n">code</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="n">compiled</span> <span class="n">EVM</span> <span class="n">bytecode</span>

<span class="err">`</span><span class="n">info</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">Additional</span> <span class="n">metadata</span> <span class="n">output</span> <span class="n">from</span> <span class="n">the</span> <span class="n">compiler</span>

<span class="err">`</span><span class="n">source</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="n">source</span> <span class="n">code</span>

<span class="err">`</span><span class="n">language</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="n">contract</span> <span class="n">language</span> <span class="p">(</span><span class="n">Solidity</span><span class="p">,</span> <span class="n">Serpent</span><span class="p">,</span> <span class="n">LLL</span><span class="p">)</span>

<span class="err">`</span><span class="n">languageVersion</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="n">contract</span> <span class="n">language</span> <span class="n">version</span>

<span class="err">`</span><span class="n">compilerVersion</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="n">solidity</span> <span class="n">compiler</span> <span class="n">version</span> <span class="n">that</span> <span class="n">was</span> <span class="n">used</span> <span class="n">to</span> <span class="n">compile</span> <span class="n">this</span>
    <span class="n">contract</span><span class="p">.</span>

<span class="err">`</span><span class="n">abiDefinition</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="p">[</span><span class="n">Application</span> <span class="n">Binary</span> <span class="n">Interface</span>
    <span class="n">Definition</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI)</span>

<span class="err">`</span><span class="n">userDoc</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="p">[</span><span class="n">NatSpec</span>
    <span class="n">Doc</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/ethereum/wiki/wiki/Ethereum-Natural-Specification-Format)</span>
    <span class="k">for</span> <span class="n">users</span><span class="p">.</span>

<span class="err">`</span><span class="n">developerDoc</span><span class="err">`</span>

<span class="o">:</span>   <span class="n">The</span> <span class="p">[</span><span class="n">NatSpec</span>
    <span class="n">Doc</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/ethereum/wiki/wiki/Ethereum-Natural-Specification-Format)</span>
    <span class="k">for</span> <span class="n">developers</span><span class="p">.</span>
<span class="o">:::</span>

<span class="n">The</span> <span class="n">immediate</span> <span class="n">structuring</span> <span class="n">of</span> <span class="n">the</span> <span class="n">compiler</span> <span class="n">output</span> <span class="p">(</span><span class="n">into</span> <span class="err">`</span><span class="n">code</span><span class="err">`</span> <span class="n">and</span>
<span class="err">`</span><span class="n">info</span><span class="err">`</span><span class="p">)</span> <span class="n">reflects</span> <span class="n">the</span> <span class="n">two</span> <span class="n">very</span> <span class="n">different</span> <span class="o">**</span><span class="n">paths</span> <span class="n">of</span> <span class="n">deployment</span><span class="o">**</span><span class="p">.</span> <span class="n">The</span>
<span class="n">compiled</span> <span class="n">EVM</span> <span class="n">code</span> <span class="n">is</span> <span class="n">sent</span> <span class="n">off</span> <span class="n">to</span> <span class="n">the</span> <span class="n">blockchain</span> <span class="n">with</span> <span class="n">a</span> <span class="n">contract</span> <span class="n">creation</span>
<span class="n">transaction</span> <span class="k">while</span> <span class="n">the</span> <span class="n">rest</span> <span class="p">(</span><span class="n">info</span><span class="p">)</span> <span class="n">will</span> <span class="n">ideally</span> <span class="n">live</span> <span class="n">on</span> <span class="n">the</span> <span class="n">decentralised</span>
<span class="n">cloud</span> <span class="n">as</span> <span class="n">publicly</span> <span class="n">verifiable</span> <span class="n">metadata</span> <span class="n">complementing</span> <span class="n">the</span> <span class="n">code</span> <span class="n">on</span> <span class="n">the</span>
<span class="n">blockchain</span><span class="p">.</span>

<span class="n">If</span> <span class="n">your</span> <span class="n">source</span> <span class="n">contains</span> <span class="n">multiple</span> <span class="n">contracts</span><span class="p">,</span> <span class="n">the</span> <span class="n">output</span> <span class="n">will</span> <span class="n">contain</span> <span class="n">an</span>
<span class="n">entry</span> <span class="k">for</span> <span class="n">each</span> <span class="n">contract</span><span class="p">,</span> <span class="n">the</span> <span class="n">corresponding</span> <span class="n">contract</span> <span class="n">info</span> <span class="n">object</span> <span class="n">can</span> <span class="n">be</span>
<span class="n">retrieved</span> <span class="n">with</span> <span class="n">the</span> <span class="n">name</span> <span class="n">of</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">as</span> <span class="n">attribute</span> <span class="n">name</span><span class="p">.</span> <span class="n">You</span> <span class="n">can</span> <span class="n">try</span>
<span class="n">this</span> <span class="n">by</span> <span class="n">inspecting</span> <span class="n">the</span> <span class="n">most</span> <span class="n">current</span> <span class="n">GlobalRegistrar</span> <span class="nl">code</span><span class="p">:</span>

<span class="err">```</span> <span class="p">{.</span><span class="n">sourceCode</span> <span class="p">.</span><span class="n">js</span><span class="p">}</span>
<span class="n">contracts</span> <span class="o">=</span> <span class="n">eth</span><span class="p">.</span><span class="n">compile</span><span class="p">.</span><span class="n">solidity</span><span class="p">(</span><span class="n">globalRegistrarSrc</span><span class="p">)</span>
</pre></div></p>
<h2 id="create-and-deploy-a-contract">Create and deploy a contract<a class="headerlink" href="#create-and-deploy-a-contract" title="Permanent link">&para;</a></h2>
<p>Before you begin this section, make sure you have both an unlocked
account as well as some funds.</p>
<p>You will now create a contract on the blockchain by <a href="https://github.com/ethereum/wiki/wiki/JavaScript-API#web3ethsendtransaction">sending a
transaction</a>
to the empty address with the EVM code from the previous section as
data.</p>
<p>::: {.note}
::: {.admonition-title}
Note
:::</p>
<p>This can be accomplished much easier using the <a href="https://ethereum.github.io/browser-solidity/">online Solidity realtime
compiler</a> or the <a href="https://github.com/ethereum/wiki/wiki/Mix:-The-DApp-IDE">Mix
IDE</a> program.
:::</p>
<p>``` {.sourceCode .js}
var primaryAddress = eth.accounts[0]
var abi = [{ constant: false, inputs: { name: 'a', type: 'uint256' } }]
var MyContract = eth.contract(abi)
var contract = MyContract.new(arg1, arg2, ..., {from: primaryAddress, data: evmByteCodeFromPreviousSection})
<div class="codehilite"><pre><span></span>All binary data is serialised in hexadecimal form. Hex strings always
have a hex prefix `0x`.

::: {.note}
::: {.admonition-title}
Note
:::

Note that `arg1, arg2, ...` are the arguments for the contract
constructor, in case it accepts any. If the contract does not require
any constructor arguments then these arguments can be omitted.
:::

It is worth pointing out that this step requires you to pay for
execution. Your balance on the account (that you put as sender in the
`from` field) will be reduced according to the gas rules of the EVM once
your transaction makes it into a block. After some time, your
transaction should appear included in a block confirming that the state
it brought about is a consensus. Your contract now lives on the
blockchain.

The asynchronous way of doing the same looks like this:

``` {.sourceCode .js}
MyContract.new([arg1, arg2, ...,]{from: primaryAccount, data: evmCode}, function(err, contract) {
  if (!err &amp;&amp; contract.address)
    console.log(contract.address);
});
</pre></div></p>
<h2 id="interacting-with-a-contract-interacting_with_a_contract">Interacting with a contract {#interacting_with_a_contract}<a class="headerlink" href="#interacting-with-a-contract-interacting_with_a_contract" title="Permanent link">&para;</a></h2>
<p>Interaction with a contract is typically done using an abstraction layer
such as the
<a href="https://github.com/ethereum/wiki/wiki/JavaScript-API#web3ethcontract">eth.contract()</a>
function which returns a javascript object with all of the contract
functions available as callable functions in javascript.</p>
<p>The standard way to describe the available functions of a contract is
the <a href="https://github.com/ethereum/wiki/wiki/Ethereum-Contract-ABI">ABI
definition</a>.
This object is an array which describles the call signature and return
values for each available contract function.</p>
<p>``` {.sourceCode .js}
var Multiply7 = eth.contract(contract.info.abiDefinition);
var myMultiply7 = Multiply7.at(address);
<div class="codehilite"><pre><span></span>Now all the function calls specified in the ABI are made available on
the contract instance. You can just call those methods on the contract
instance in one of two ways.

``` {.sourceCode .js}
&gt; myMultiply7.multiply.sendTransaction(3, {from: address})
&quot;0x12345&quot;
&gt; myMultiply7.multiply.call(3)
21
</pre></div></p>
<p>When called using <code>sendTransaction</code> the function call is executed via
sending a transaction. This will cost ether to send and the call will be
recorded forever on the blockchain. The return value of calls made in
this manner is the hash of the transaction.</p>
<p>When called using <code>call</code> the function is executed locally in the EVM and
the return value of the function is returned with the function. Calls
made in this manner are not recorded on the blockchain and thus, cannot
modify the internal state of the contract. This manner of call is
referred to as a <strong>constant</strong> function call. Calls made in this manner
do not cost any ether.</p>
<p>You should use <code>call</code> if you are interested only in the return value and
use <code>sendTransaction</code> if you only care about <em>side effects</em> on the state
of the contract.</p>
<p>In the example above, there are no side effects, therefore
<code>sendTransaction</code> only burns gas and increases the entropy of the
universe.</p>
<h2 id="contract-metadata">Contract metadata<a class="headerlink" href="#contract-metadata" title="Permanent link">&para;</a></h2>
<p>In the previous sections we explained how you create a contract on the
blockchain. Now we will deal with the rest of the compiler output, the
<strong>contract metadata</strong> or contract info.</p>
<p>When interacting with a contract you did not create you might want
documentation or to look at the source code. Contract authors are
encouraged to make such information available by registering it on the
blockchain or through a third party service, such as
<a href="https://www.etherchain.org/contracts">EtherChain</a>. The <code>admin</code> API
provides convenience methods to fetch this bundle for any contract that
chose to register.</p>
<p>``` {.sourceCode .js}
// get the contract info for contract address to do manual verification
var info = admin.getContractInfo(address) // lookup, fetch, decode
var source = info.source;
var abiDef = info.abiDefinition
<div class="codehilite"><pre><span></span><span class="n">The</span> <span class="n">underlying</span> <span class="n">mechanism</span> <span class="n">that</span> <span class="n">makes</span> <span class="n">this</span> <span class="n">work</span> <span class="n">is</span> <span class="n">is</span> <span class="nl">that</span><span class="p">:</span>

<span class="o">-</span>   <span class="n">contract</span> <span class="n">info</span> <span class="n">is</span> <span class="n">uploaded</span> <span class="n">somewhere</span> <span class="n">identifiable</span> <span class="n">by</span> <span class="n">a</span> <span class="o">*</span><span class="n">URI</span><span class="o">*</span> <span class="n">which</span> <span class="n">is</span>
    <span class="n">publicly</span> <span class="n">accessible</span>
<span class="o">-</span>   <span class="n">anyone</span> <span class="n">can</span> <span class="n">find</span> <span class="k">out</span> <span class="n">what</span> <span class="n">the</span> <span class="o">*</span><span class="n">URI</span><span class="o">*</span> <span class="n">is</span> <span class="n">only</span> <span class="n">knowing</span> <span class="n">the</span> <span class="n">contracts</span>
    <span class="n">address</span>

<span class="n">These</span> <span class="n">requirements</span> <span class="n">are</span> <span class="n">achieved</span> <span class="n">using</span> <span class="n">a</span> <span class="mi">2</span> <span class="n">step</span> <span class="n">blockchain</span> <span class="n">registry</span><span class="p">.</span> <span class="n">The</span>
<span class="n">first</span> <span class="n">step</span> <span class="n">registers</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">code</span> <span class="p">(</span><span class="n">hash</span><span class="p">)</span> <span class="n">with</span> <span class="n">a</span> <span class="n">content</span> <span class="n">hash</span> <span class="k">in</span> <span class="n">a</span>
<span class="n">contract</span> <span class="n">called</span> <span class="err">`</span><span class="n">HashReg</span><span class="err">`</span><span class="p">.</span> <span class="n">The</span> <span class="n">second</span> <span class="n">step</span> <span class="n">registers</span> <span class="n">a</span> <span class="n">url</span> <span class="n">with</span> <span class="n">the</span>
<span class="n">content</span> <span class="n">hash</span> <span class="k">in</span> <span class="n">the</span> <span class="err">`</span><span class="n">UrlHint</span><span class="err">`</span> <span class="n">contract</span><span class="p">.</span> <span class="n">These</span> <span class="p">[</span><span class="n">registry</span>
<span class="n">contracts</span><span class="p">](</span><span class="nl">https</span><span class="p">:</span><span class="c1">//github.com/ethereum/go-ethereum/blob/develop/common/registrar/contracts.go)</span>
<span class="n">were</span> <span class="n">part</span> <span class="n">of</span> <span class="n">the</span> <span class="n">Frontier</span> <span class="k">release</span> <span class="n">and</span> <span class="n">have</span> <span class="n">carried</span> <span class="n">on</span> <span class="n">into</span> <span class="n">Homestead</span><span class="p">.</span>

<span class="n">By</span> <span class="n">using</span> <span class="n">this</span> <span class="n">scheme</span><span class="p">,</span> <span class="n">it</span> <span class="n">is</span> <span class="n">sufficient</span> <span class="n">to</span> <span class="n">know</span> <span class="n">a</span> <span class="n">contract</span><span class="err">\&#39;</span><span class="n">s</span> <span class="n">address</span> <span class="n">to</span>
<span class="n">look</span> <span class="n">up</span> <span class="n">the</span> <span class="n">url</span> <span class="n">and</span> <span class="n">fetch</span> <span class="n">the</span> <span class="n">actual</span> <span class="n">contract</span> <span class="n">metadata</span> <span class="n">info</span> <span class="n">bundle</span><span class="p">.</span>

<span class="n">So</span> <span class="k">if</span> <span class="n">you</span> <span class="n">are</span> <span class="n">a</span> <span class="n">conscientious</span> <span class="n">contract</span> <span class="n">creator</span><span class="p">,</span> <span class="n">the</span> <span class="n">steps</span> <span class="n">are</span> <span class="n">the</span>
<span class="nl">following</span><span class="p">:</span>

<span class="mf">1.</span>  <span class="n">Deploy</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">itself</span> <span class="n">to</span> <span class="n">the</span> <span class="n">blockchain</span>
<span class="mf">2.</span>  <span class="n">Get</span> <span class="n">the</span> <span class="n">contract</span> <span class="n">info</span> <span class="n">json</span> <span class="n">file</span><span class="p">.</span>
<span class="mf">3.</span>  <span class="n">Deploy</span> <span class="n">contract</span> <span class="n">info</span> <span class="n">json</span> <span class="n">file</span> <span class="n">to</span> <span class="n">any</span> <span class="n">url</span> <span class="n">of</span> <span class="n">your</span> <span class="n">choice</span>
<span class="mf">4.</span>  <span class="n">Register</span> <span class="n">codehash</span> <span class="o">-</span><span class="err">\</span><span class="o">&gt;</span><span class="n">content</span> <span class="n">hash</span> <span class="o">-</span><span class="err">\</span><span class="o">&gt;</span> <span class="n">url</span>

<span class="n">The</span> <span class="n">JS</span> <span class="n">API</span> <span class="n">makes</span> <span class="n">this</span> <span class="n">process</span> <span class="n">very</span> <span class="n">easy</span> <span class="n">by</span> <span class="n">providing</span> <span class="n">helpers</span><span class="p">.</span> <span class="n">Call</span>
<span class="err">`</span><span class="n">admin</span><span class="p">.</span><span class="k">register</span><span class="err">`</span> <span class="n">to</span> <span class="n">extract</span> <span class="n">info</span> <span class="n">from</span> <span class="n">the</span> <span class="n">contract</span><span class="p">,</span> <span class="n">write</span> <span class="k">out</span> <span class="n">its</span> <span class="n">json</span>
<span class="n">serialisation</span> <span class="k">in</span> <span class="n">the</span> <span class="n">given</span> <span class="n">file</span><span class="p">,</span> <span class="n">calculates</span> <span class="n">the</span> <span class="n">content</span> <span class="n">hash</span> <span class="n">of</span> <span class="n">the</span> <span class="n">file</span>
<span class="n">and</span> <span class="n">finally</span> <span class="n">registers</span> <span class="n">this</span> <span class="n">content</span> <span class="n">hash</span> <span class="n">to</span> <span class="n">the</span> <span class="n">contract</span><span class="err">\&#39;</span><span class="n">s</span> <span class="n">code</span> <span class="n">hash</span><span class="p">.</span>
<span class="n">Once</span> <span class="n">you</span> <span class="n">deployed</span> <span class="n">that</span> <span class="n">file</span> <span class="n">to</span> <span class="n">any</span> <span class="n">url</span><span class="p">,</span> <span class="n">you</span> <span class="n">can</span> <span class="n">use</span> <span class="err">`</span><span class="n">admin</span><span class="p">.</span><span class="n">registerUrl</span><span class="err">`</span>
<span class="n">to</span> <span class="k">register</span> <span class="n">the</span> <span class="n">url</span> <span class="n">with</span> <span class="n">your</span> <span class="n">content</span> <span class="n">hash</span> <span class="n">on</span> <span class="n">the</span> <span class="n">blockchain</span> <span class="n">as</span> <span class="n">well</span><span class="p">.</span>
<span class="p">(</span><span class="n">Note</span> <span class="n">that</span> <span class="k">in</span> <span class="k">case</span> <span class="n">a</span> <span class="n">fixed</span> <span class="n">content</span> <span class="n">addressed</span> <span class="n">model</span> <span class="n">is</span> <span class="n">used</span> <span class="n">as</span> <span class="n">document</span>
<span class="n">store</span><span class="p">,</span> <span class="n">the</span> <span class="n">url</span><span class="o">-</span><span class="n">hint</span> <span class="n">is</span> <span class="n">no</span> <span class="n">longer</span> <span class="n">necessary</span><span class="p">.)</span>

<span class="err">```</span> <span class="p">{.</span><span class="n">sourceCode</span> <span class="p">.</span><span class="n">js</span><span class="p">}</span>
<span class="n">source</span> <span class="o">=</span> <span class="s">&quot;contract test { function multiply(uint a) returns(uint d) { return a * 7; } }&quot;</span>
<span class="c1">// compile with solc</span>
<span class="n">contract</span> <span class="o">=</span> <span class="n">eth</span><span class="p">.</span><span class="n">compile</span><span class="p">.</span><span class="n">solidity</span><span class="p">(</span><span class="n">source</span><span class="p">).</span><span class="n">test</span>
<span class="c1">// create contract object</span>
<span class="n">var</span> <span class="n">MyContract</span> <span class="o">=</span> <span class="n">eth</span><span class="p">.</span><span class="n">contract</span><span class="p">(</span><span class="n">contract</span><span class="p">.</span><span class="n">info</span><span class="p">.</span><span class="n">abiDefinition</span><span class="p">)</span>
<span class="c1">// extracts info from contract, save the json serialisation in the given file,</span>
<span class="n">contenthash</span> <span class="o">=</span> <span class="n">admin</span><span class="p">.</span><span class="n">saveInfo</span><span class="p">(</span><span class="n">contract</span><span class="p">.</span><span class="n">info</span><span class="p">,</span> <span class="s">&quot;~/dapps/shared/contracts/test/info.json&quot;</span><span class="p">)</span>
<span class="c1">// send off the contract to the blockchain</span>
<span class="n">MyContract</span><span class="p">.</span><span class="n">new</span><span class="p">({</span><span class="nl">from</span><span class="p">:</span> <span class="n">primaryAccount</span><span class="p">,</span> <span class="nl">data</span><span class="p">:</span> <span class="n">contract</span><span class="p">.</span><span class="n">code</span><span class="p">},</span> <span class="n">function</span><span class="p">(</span><span class="n">error</span><span class="p">,</span> <span class="n">contract</span><span class="p">){</span>
  <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">error</span> <span class="o">&amp;&amp;</span> <span class="n">contract</span><span class="p">.</span><span class="n">address</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// calculates the content hash and registers it with the code hash in `HashReg`</span>
    <span class="c1">// it uses address to send the transaction.</span>
    <span class="c1">// returns the content hash that we use to register a url</span>
    <span class="n">admin</span><span class="p">.</span><span class="k">register</span><span class="p">(</span><span class="n">primaryAccount</span><span class="p">,</span> <span class="n">contract</span><span class="p">.</span><span class="n">address</span><span class="p">,</span> <span class="n">contenthash</span><span class="p">)</span>
    <span class="c1">// here you deploy ~/dapps/shared/contracts/test/info.json to a url</span>
    <span class="n">admin</span><span class="p">.</span><span class="n">registerUrl</span><span class="p">(</span><span class="n">primaryAccount</span><span class="p">,</span> <span class="n">hash</span><span class="p">,</span> <span class="n">url</span><span class="p">)</span>
  <span class="p">}</span>
<span class="p">});</span>
</pre></div></p>
<h2 id="testing-contracts-and-transactions">Testing contracts and transactions<a class="headerlink" href="#testing-contracts-and-transactions" title="Permanent link">&para;</a></h2>
<p>Often you need to resort to a low level strategy of testing and
debugging contracts and transactions. This section introduces some debug
tools and practices you can use. In order to test contracts and
transactions without real-word consequences, you best test it on a
private blockchain. This can be achieved with configuring an alternative
network id (select a unique integer) and/or disable peers. It is
recommended practice that for testing you use an alternative data
directory and ports so that you never even accidentally clash with your
live running node (assuming that runs using the defaults. Starting your
<code>geth</code> with in VM debug mode with profiling and highest logging
verbosity level is recommended:</p>
<p>``` {.sourceCode .bash}
geth --datadir ~/dapps/testing/00/ --port 30310 --rpcport 8110 --networkid 4567890 --nodiscover --maxpeers 0 --vmdebug --verbosity 6 --pprof --pprofport 6110 console 2&gt;&gt; ~/dapp/testint/00/00.log
<div class="codehilite"><pre><span></span><span class="n">Before</span> <span class="n">you</span> <span class="nb">can</span> <span class="n">submit</span> <span class="nb">any</span> <span class="n">transactions</span>, <span class="n">you</span> <span class="n">need</span> <span class="n">set</span> <span class="n">up</span> <span class="n">your</span> <span class="n">private</span>
<span class="n">test</span> <span class="n">chain</span>. <span class="n">See</span> [<span class="n">test-networks</span>]{<span class="k">role</span>=<span class="s">&quot;ref&quot;</span>}.

``` {.<span class="n">sourceCode</span> .<span class="n">js</span>}
// <span class="n">create</span> <span class="n">account</span>. <span class="k">will</span> <span class="n">prompt</span> <span class="k">for</span> <span class="n">password</span>
<span class="n">personal</span>.<span class="n">newAccount</span>();
// <span class="nb">name</span> <span class="n">your</span> <span class="n">primary</span> <span class="n">account</span>, <span class="k">will</span> <span class="n">often</span> <span class="k">use</span> <span class="n">it</span>
<span class="n">primary</span> = <span class="n">eth</span>.<span class="n">accounts</span>[<span class="mi">0</span>];
// <span class="n">check</span> <span class="n">your</span> <span class="n">balance</span> (<span class="n">denominated</span> <span class="n">in</span> <span class="n">ether</span>)
<span class="n">balance</span> = <span class="n">web3</span>.<span class="n">fromWei</span>(<span class="n">eth</span>.<span class="n">getBalance</span>(<span class="n">primary</span>), <span class="s">&quot;ether&quot;</span>);
</pre></div></p>
<p>``` {.sourceCode .js}
// assume an existing unlocked primary account
primary = eth.accounts[0];</p>
<p>// mine 10 blocks to generate ether</p>
<p>// starting miner
miner.start(4);
// sleep for 10 blocks (this can take quite some time).
admin.sleepBlocks(10);
// then stop mining (just not to burn heat in vain)
miner.stop();
balance = web3.fromWei(eth.getBalance(primary), "ether");
<div class="codehilite"><pre><span></span>After you create transactions, you can force process them with the
following lines:

``` {.sourceCode .js}
miner.start(1);
admin.sleepBlocks(1);
miner.stop();
</pre></div></p>
<p>You can check your pending transactions with:</p>
<p>``` {.sourceCode .js}
// shows transaction pool
txpool.status
// number of pending txs
eth.getBlockTransactionCount("pending");
// print all pending txs
eth.getBlock("pending", true).transactions
<div class="codehilite"><pre><span></span>If you submitted contract creation transaction, you can check if the
desired code actually got inserted in the current blockchain:

``` {.sourceCode .js}
txhash = eth.sendTansaction({from:primary, data: code})
//... mining
contractaddress = eth.getTransactionReceipt(txhash);
eth.getCode(contractaddress)
</pre></div></p>
                
                  
                
              
              
                
              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../account-types-gas-and-transactions/" title="帐户类型燃料交易" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  后退
                </span>
                帐户类型燃料交易
              </span>
            </div>
          </a>
        
        
          <a href="../accessing-contracts-and-transactions/" title="访问合约和交易" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  前进
                </span>
                访问合约和交易
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            版权 &copy; 2018 -  wohugb.github.io
          </div>
        
        powered by
        <a href="http://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
  <div class="md-footer-social">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
      <a href="http://wohugb.github.io" class="md-footer-social__link fa fa-globe"></a>
    
      <a href="https://github.com/wohugb" class="md-footer-social__link fa fa-github-alt"></a>
    
      <a href="https://twitter.com/wohugb" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/wohugb" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../assets/javascripts/application.6cdc17f0.js"></script>
      
        
        
          
          <script src="../../assets/javascripts/lunr/lunr.stemmer.support.js"></script>
          
            
              
              <script src="../../assets/javascripts/lunr/lunr.zh.js"></script>
            
          
          
        
      
      <script>app.initialize({version:"0.17.2",url:{base:"../.."}})</script>
      
    
    
      
    
  </body>
</html>